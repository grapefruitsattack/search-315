'use client'
import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export default function ShareModuleContent(
    { text, url }: { text: string, url: string }
  ) {
    
    const shareURLTwitter = (text: string) => `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    const shareURLFacebook:string = `https://www.facebook.com/share.php?u=${encodeURIComponent(`${url}`)}`;
    const shareURLMisskey = (text: string) => `https://misskeyshare.link/share.html?text=${encodeURIComponent(text)}`;
    const shareURLMastodon = (text: string) => `https://donshare.net/share.html?text=${encodeURIComponent(text)}`;
    const shareURLSidemisskey = (text: string) => `https://side.misskey.productions//share?text=${encodeURIComponent(text)}`;

    const shareText = `${text}\n${url}`;

    const [val, setVal] = useState(shareText);

    //テキストコピー
    function copyTextToClipboard(text: string) {
        navigator.clipboard.writeText(text)
        .then(function() {
          console.log('Async: Copying to clipboard was successful!');
        }, function(err) {
          console.error('Async: Could not copy text: ', err);
        });
      }

    return (
        <section>
        {/* Share Modal by https://tailwindcomponents.com/component/share-modal */}
        <div className="my-4">
          {/* <p className="text-sm">Share this link via</p> */}
        <div className="flex flex-wrap justify-center my-6 gap-y-3 gap-x-1.5">
        {/* ツイッター */}
        <div>
            <a
                className="border 
                hover:bg-[#1d9bf0] fill-[#1d9bf0] 
                text-[#1d9bf0] hover:text-white font-sans
                w-auto h-10
                hover:fill-white rounded-full 
                flex items-center justify-center s
                border border-[#1d9bf0]/30 
                shadow-md
                hover:shadow-xl hover:shadow-[#1d9bf0]/50 
                cursor-pointer
                transition-all duration-500 ease-out
                "
                href={shareURLTwitter(val)}
                target="_blank"
                rel="noopener noreferrer"
            >
                <svg
                  className="ml-2"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24" height="24"
                  viewBox="0 0 24 24"
                >
                <path d="M14.058 3.41c-1.807 .767 -2.995 2.453 -3.056 4.38l-.002 .182l-.243 -.023c-2.392 -.269 -4.498 -1.512 -5.944 -3.531a1 1 0 0 0 -1.685 .092l-.097 .186l-.049 .099c-.719 1.485 -1.19 3.29 -1.017 5.203l.03 .273c.283 2.263 1.5 4.215 3.779 5.679l.173 .107l-.081 .043c-1.315 .663 -2.518 .952 -3.827 .9c-1.056 -.04 -1.446 1.372 -.518 1.878c3.598 1.961 7.461 2.566 10.792 1.6c4.06 -1.18 7.152 -4.223 8.335 -8.433l.127 -.495c.238 -.993 .372 -2.006 .401 -3.024l.003 -.332l.393 -.779l.44 -.862l.214 -.434l.118 -.247c.265 -.565 .456 -1.033 .574 -1.43l.014 -.056l.008 -.018c.22 -.593 -.166 -1.358 -.941 -1.358l-.122 .007a.997 .997 0 0 0 -.231 .057l-.086 .038a7.46 7.46 0 0 1 -.88 .36l-.356 .115l-.271 .08l-.772 .214c-1.336 -1.118 -3.144 -1.254 -5.012 -.554l-.211 .084z" 
                 ></path>
                </svg>
                 <p className="text-sm mr-2 ml-0.5">Twitter</p>
            </a>
        </div>
        {/* フェイスブック */}
        <div>
            <a
                className="flex 
                items-center justify-center
                hover:bg-[#1877f2] 
                fill-[#1877f2] hover:fill-white 
                text-[#1877f2] hover:text-white font-sans
                w-auto h-10
                rounded-full
                border border-[#1877f2]/30 
                shadow-md
                hover:shadow-xl hover:shadow-[#1877f2]/50 
                cursor-pointer
                transition-all duration-500 ease-out
                "
                href={shareURLFacebook}
                target="_blank"
                rel="noopener noreferrer"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24" height="24"
                    viewBox="0 0 24 24"
                >
                <path d="M18 2a1 1 0 0 1 .993 .883l.007 .117v4a1 1 0 0 1 -.883 .993l-.117 .007h-3v1h3a1 1 0 0 1 .991 1.131l-.02 .112l-1 4a1 1 0 0 1 -.858 .75l-.113 .007h-2v6a1 1 0 0 1 -.883 .993l-.117 .007h-4a1 1 0 0 1 -.993 -.883l-.007 -.117v-6h-2a1 1 0 0 1 -.993 -.883l-.007 -.117v-4a1 1 0 0 1 .883 -.993l.117 -.007h2v-1a6 6 0 0 1 5.775 -5.996l.225 -.004h3z" ></path>
                </svg>
                <p className="text-sm mr-2 ml-0.5">facebook</p>
            </a>
        </div>
        {/* Misskey */}
        <div>
            <a
                className="
                hover:bg-[#72d704] fill-[#72d704] hover:fill-white 
                text-[#5da90a] hover:text-white font-sans
                w-auto h-10
                rounded-full flex 
                items-center justify-center
                border border-[#72d704]/30 
                shadow-md
                hover:shadow-xl hover:shadow-[#72d704]/50 
                cursor-pointer
                transition-all duration-500 ease-out
                "
                href={shareURLMisskey(val)}
                target="_blank"
                rel="noopener noreferrer"
            >
            {/* misskey logo by https://misskey-hub.net/appendix/assets.html */}
                <svg
                  className="ml-1"
                    xmlns="http://www.w3.org/2000/svg"
                    width="23" height="16"
                    viewBox="0 0 24 24"
                >
                        <g id="path2" transform="matrix(0.0576752,0,0,0.0576752,-14.8604,-10.7875)">
        <clipPath id="_clip1">
            <rect x="188.977" y="188.975" width="55" height="390.379"/>
        </clipPath>
        
            <g transform="matrix(1,0,0,1,0.317427,-0.952251)">
                <path d="M256.418,188.976C248.558,188.944 240.758,190.308 233.379,193.013C220.308,197.613 209.533,205.888 201.091,217.802C193.02,229.329 188.977,242.195 188.977,256.409L188.977,508.89C188.977,527.332 195.52,543.29 208.576,556.732C222.032,569.803 237.99,576.331 256.418,576.331C275.259,576.331 291.204,569.803 304.274,556.747C317.73,543.291 324.441,527.332 324.441,508.89L324.441,462.983C324.584,453.04 334.824,455.655 340.01,462.983C349.695,479.767 370.251,494.19 394.193,494.105L394.193,494.119C418.119,494.019 438.005,482.196 448.375,462.983C452.304,458.354 463.377,450.455 464.52,462.983L464.52,508.89C464.52,527.332 471.047,543.29 484.104,556.732C497.574,569.803 513.511,576.331 531.953,576.331C550.78,576.331 566.739,569.803 579.809,556.747C593.265,543.291 599.977,527.332 599.977,508.89L599.977,256.409C599.977,242.195 595.752,229.329 587.309,217.802C579.224,205.874 568.653,197.613 555.597,193.013C547.912,190.314 540.228,188.976 532.543,188.976C511.788,188.976 494.301,197.046 480.073,213.188L411.636,293.281C410.107,294.438 405.006,303.247 394.178,303.247C383.379,303.247 378.868,294.439 377.325,293.296L308.297,213.188C294.47,197.046 277.173,188.976 256.418,188.976ZM682.904,188.983C666.763,188.983 652.926,194.748 641.404,206.271C630.261,217.413 624.691,231.054 624.691,247.196C624.691,263.338 630.261,277.174 641.404,288.697C652.926,299.839 666.763,305.41 682.904,305.41C699.046,305.41 712.88,299.839 724.412,288.697C735.935,277.174 741.693,263.338 741.693,247.196C741.693,231.054 735.935,217.413 724.412,206.271C712.88,194.748 699.046,188.983 682.904,188.983ZM1327.58,193.013C1311.45,193.013 1297.62,198.779 1286.1,210.302C1274.96,221.444 1269.38,235.08 1269.38,251.212L1269.38,519.72C1269.38,535.861 1274.96,549.697 1286.1,561.22C1297.62,572.362 1311.45,577.933 1327.58,577.933C1343.73,577.933 1357.55,572.362 1369.08,561.22C1380.6,549.697 1386.37,535.867 1386.37,519.734C1386.37,508.211 1387.9,502.453 1390.96,502.453C1392.51,502.453 1394.05,503.023 1395.58,504.166L1453.2,560.061C1464.72,571.203 1478.36,576.774 1494.11,576.774C1510.62,576.774 1524.45,571.009 1535.6,559.486C1546.74,547.572 1552.31,533.936 1552.31,518.575C1552.31,502.053 1546.36,488.029 1534.45,476.506C1508.32,450.765 1494.69,437.517 1493.54,436.755C1488.54,431.755 1488.73,427.53 1494.11,424.073L1495.27,423.497L1495.27,422.929L1531.57,399.875C1548.85,388.352 1557.5,372.026 1557.5,350.904C1557.5,339.381 1554.42,328.622 1548.28,318.623C1536.76,301.339 1520.43,292.691 1499.3,292.691C1487.78,292.691 1477.02,295.768 1467.04,301.911C1422.48,331.499 1399.42,346.678 1397.88,347.449C1395.2,349.363 1392.7,349.738 1390.4,348.586C1387.7,347.434 1386.35,344.939 1386.35,341.101L1386.35,251.212C1386.35,235.08 1380.59,221.444 1369.07,210.302C1357.55,198.779 1343.72,193.013 1327.58,193.013ZM1716.37,291.738C1676.42,291.738 1642.24,305.949 1613.81,334.376C1585.76,362.422 1571.74,396.227 1571.74,435.795C1571.74,475.745 1585.76,509.932 1613.81,538.359C1642.24,566.404 1676.42,580.428 1716.37,580.428C1755.94,580.428 1789.94,566.404 1818.37,538.359C1827.2,529.521 1831.62,518.773 1831.62,506.107C1831.62,493.423 1827.2,482.664 1818.37,473.827C1809.53,464.999 1798.77,460.584 1786.11,460.584C1773.42,460.584 1762.66,464.999 1753.83,473.827C1743.46,484.588 1730.97,489.963 1716.37,489.963C1701.4,489.963 1688.53,484.78 1677.77,474.41C1667.39,463.649 1662.2,450.775 1662.2,435.795C1662.2,421.206 1667.59,408.72 1678.35,398.34C1683.73,392.578 1690.26,388.74 1697.93,386.817C1699.87,386.436 1701.4,386.623 1702.55,387.385C1703.32,388.547 1702.93,389.702 1701.39,390.854L1689.87,402.953C1681.03,411.791 1676.61,422.359 1676.61,434.644C1676.61,447.319 1680.45,457.497 1688.13,465.182C1695.81,472.868 1706.57,476.705 1720.41,476.705C1730.01,476.705 1739.61,471.91 1749.21,462.311L1816.06,396.044C1824.9,387.197 1829.32,376.436 1829.32,363.77C1829.32,351.086 1824.9,340.332 1816.06,331.504C1789.17,304.992 1755.94,291.738 1716.37,291.738ZM877.977,292.668C841.947,292.194 813.839,301.679 793.662,321.133C775.996,338.036 767.168,359.358 767.168,385.089C767.549,417.363 780.035,441.565 804.624,457.697C811.918,462.687 820.941,466.72 831.693,469.796C837.083,471.72 846.111,474.02 858.777,476.705C869.919,479.391 882.023,481.886 895.088,484.191C897.774,484.962 898.924,486.312 898.543,488.236C898.543,490.541 897.58,491.691 895.657,491.691C890.667,492.072 886.059,492.266 881.831,492.266C850.328,488.81 829.001,485.927 817.859,483.622C814.793,482.851 811.535,482.463 808.078,482.463C796.165,482.463 785.787,486.884 776.949,495.721C768.502,504.178 764.282,514.551 764.282,526.836C764.282,536.825 767.352,545.854 773.494,553.92C780.027,561.986 788.486,567.169 798.866,569.473C831.13,576.778 860.317,580.428 886.429,580.428C922.16,580.428 950.013,570.825 969.992,551.617C987.277,535.094 995.925,513.775 995.925,487.653C995.925,455.388 983.626,431.187 959.037,415.045C945.972,406.598 927.915,400.45 904.869,396.612C891.042,393.927 879.518,391.427 870.3,389.112L870.3,389.127C867.605,388.356 866.067,386.818 865.686,384.513C865.686,382.59 867.224,381.44 870.3,381.059C873.757,380.678 877.415,380.678 881.262,381.059C913.146,384.135 934.652,386.823 945.794,389.127C948.861,389.889 951.931,390.271 955.007,390.271C967.301,390.271 977.674,386.051 986.121,377.604C994.959,368.767 999.379,358.393 999.379,346.49C999.379,336.109 996.109,326.894 989.576,318.837C983.043,310.761 974.79,305.566 964.81,303.261C938.298,297.5 911.788,294.042 885.285,292.89C882.813,292.77 880.379,292.7 877.977,292.668ZM1128.73,292.668C1092.7,292.194 1064.59,301.679 1044.42,321.133C1026.75,338.036 1017.92,359.358 1017.92,385.089C1018.3,417.363 1030.79,441.565 1055.38,457.697C1062.67,462.687 1071.7,466.72 1082.46,469.796C1087.84,471.72 1096.86,474.02 1109.54,476.705C1120.68,479.391 1132.79,481.886 1145.84,484.191C1148.53,484.962 1149.68,486.312 1149.3,488.236C1149.3,490.541 1148.34,491.691 1146.41,491.691C1141.42,492.072 1136.81,492.266 1132.59,492.266C1101.09,488.81 1079.77,485.927 1068.63,483.622C1065.55,482.851 1062.29,482.463 1058.83,482.463C1046.92,482.463 1036.55,486.884 1027.72,495.721C1019.26,504.178 1015.04,514.551 1015.04,526.836C1015.04,536.825 1018.11,545.854 1024.26,553.92C1030.79,561.986 1039.24,567.169 1049.62,569.473C1081.88,576.778 1111.08,580.428 1137.2,580.428C1172.92,580.428 1200.77,570.825 1220.75,551.617C1238.03,535.094 1246.68,513.775 1246.68,487.653C1246.68,455.388 1234.39,431.187 1209.81,415.045C1196.74,406.598 1178.68,400.45 1155.64,396.612C1141.81,393.927 1130.29,391.427 1121.07,389.112L1121.05,389.127C1118.37,388.356 1116.84,386.818 1116.45,384.513C1116.45,382.59 1117.99,381.44 1121.05,381.059C1124.52,380.678 1128.17,380.678 1132.01,381.059C1163.89,384.135 1185.41,386.823 1196.55,389.127C1199.62,389.889 1202.69,390.271 1205.76,390.271C1218.06,390.271 1228.43,386.051 1236.89,377.604C1245.72,368.767 1250.13,358.393 1250.13,346.49C1250.13,336.109 1246.87,326.894 1240.35,318.837C1233.81,310.761 1225.55,305.566 1215.56,303.261C1189.06,297.5 1162.55,294.042 1136.04,292.89C1133.57,292.77 1131.13,292.7 1128.73,292.668ZM1910.17,296.736C1894.04,296.736 1880.21,302.501 1868.69,314.024C1857.55,325.157 1851.98,338.793 1851.98,354.934L1851.98,435.028C1851.98,473.825 1865.8,507.05 1893.45,534.705C1921.12,562.36 1954.36,576.191 1993.15,576.191C2000.84,576.191 2007.95,575.614 2014.48,574.471C2018.32,573.699 2021,574.469 2022.53,576.774C2023.69,578.307 2023.3,580.42 2021.39,583.115C2016.39,590.029 2005.82,593.486 1989.69,593.486C1983.55,593.486 1975.68,591.949 1966.07,588.873C1956.47,585.797 1948.98,584.259 1943.6,584.259C1920.93,584.259 1904.99,594.638 1895.77,615.388C1892.32,622.302 1890.58,629.598 1890.58,637.283C1890.58,659.948 1900.77,675.892 1921.13,685.11C1941.49,694.709 1964.34,699.505 1989.69,699.505C2033.49,699.505 2068.25,686.639 2093.98,660.898C2120.11,635.166 2133.18,600.784 2133.18,557.758L2133.18,452.308C2133.94,446.157 2134.32,440.399 2134.32,435.028L2134.32,354.934C2134.32,338.802 2128.57,325.166 2117.04,314.024C2105.9,302.501 2092.27,296.736 2076.13,296.736C2059.99,296.736 2046.16,302.501 2034.63,314.024C2023.11,325.157 2017.35,338.793 2017.35,354.934L2017.35,435.028C2017.35,441.551 2015.04,447.309 2010.43,452.308C2005.83,456.918 2000.07,459.225 1993.15,459.225C1986.62,459.225 1980.86,456.918 1975.87,452.308C1971.26,447.309 1968.95,441.551 1968.95,435.028L1968.95,354.934C1968.95,338.802 1963.19,325.166 1951.67,314.024C1940.14,302.501 1926.3,296.736 1910.17,296.736ZM683.473,316.947C667.331,316.947 653.495,322.713 641.972,334.236C630.449,345.768 624.691,359.602 624.691,375.744L624.691,518.118C624.691,534.259 630.449,548.095 641.972,559.618C653.504,570.761 667.341,576.331 683.473,576.331C699.624,576.331 713.27,570.761 724.412,559.618C735.935,548.095 741.693,534.259 741.693,518.118L741.693,375.744C741.693,359.593 735.935,345.759 724.412,334.236C713.261,322.713 699.614,316.947 683.473,316.947Z" />
                </g>

    </g>
                </svg>
                <p className="text-sm mr-2 ml-0.5">Misskey</p>
            </a>
        </div>
        {/* マストドン */}
        <div>
            <a
                className="
                hover:bg-[#6f5dfd] 
                fill-[#6f5dfd] hover:fill-white 
                text-[#5749ca] hover:text-white font-sans
                w-auto h-10
                rounded-full flex 
                items-center justify-center
                border border-[#6f5dfd]/30 
                shadow-md
                hover:shadow-xl hover:shadow-[#6f5dfd]/50 
                cursor-pointer
                transition-all duration-500 ease-out
                "
                href={shareURLMastodon(val)}
                target="_blank"
                rel="noopener noreferrer"
            >
<svg xmlns="http://www.w3.org/2000/svg" className="icon icon-tabler icon-tabler-brand-mastodon" width="24" height="24" viewBox="0 0 24 24" strokeWidth="2" stroke="currentColor" fill="none" strokeLinecap="round" strokeLinejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M18.648 15.254c-1.816 1.763 -6.648 1.626 -6.648 1.626a18.262 18.262 0 0 1 -3.288 -.256c1.127 1.985 4.12 2.81 8.982 2.475c-1.945 2.013 -13.598 5.257 -13.668 -7.636l-.026 -1.154c0 -3.036 .023 -4.115 1.352 -5.633c1.671 -1.91 6.648 -1.666 6.648 -1.666s4.977 -.243 6.648 1.667c1.329 1.518 1.352 2.597 1.352 5.633s-.456 4.074 -1.352 4.944z"></path>
   <path d="M12 11.204v-2.926c0 -1.258 -.895 -2.278 -2 -2.278s-2 1.02 -2 2.278v4.722m4 -4.722c0 -1.258 .895 -2.278 2 -2.278s2 1.02 2 2.278v4.722"></path>
</svg>
                <p className="text-sm mr-2 ml-0.5">Mastodon</p>
            </a>
        </div>
        {/* Sidemisskey */}
        <div>
            <a
                className="pl-1
                hover:bg-[#15bc17] fill-[#15bc17] hover:fill-white 
                text-[#15bc17] hover:text-white font-sans
                w-auto h-10
                rounded-full flex 
                items-center justify-center
                border border-[#15bc17]/30 
                shadow-md
                hover:shadow-xl hover:shadow-[#15bc17]/50 
                cursor-pointer
                transition-all duration-500 ease-out
                "
                href={shareURLSidemisskey(val)}
                target="_blank"
                rel="noopener noreferrer"
            >
            {/* misskey logo by https://misskey-hub.net/appendix/assets.html */}
            <svg width="20" height="20" viewBox="0 0 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" >
    <g transform="matrix(1,0,0,1,18.9533,-15.1423)">
        <path d="M39.173,198.893C32.64,198.893 26.34,197.426 20.273,194.493C14.207,191.559 8.84,187.593 4.173,182.593C-0.493,177.593 -4.193,171.926 -6.927,165.593C-9.66,159.259 -11.027,152.693 -11.027,145.893C-11.027,131.626 -4.993,120.093 7.073,111.293C19.14,102.493 35.907,97.159 57.373,95.293C57.907,86.359 58.24,67.867 58.373,57.6L-1.827,57.6L-1.827,30.2L91.773,30.2L91.773,32.2C91.773,52.334 91.24,79.226 90.173,95.093C99.373,95.759 108.373,97.093 117.173,99.093L117.173,66.288L148.773,66.288L148.773,83.493C148.773,88.159 148.74,92.659 148.673,96.993C148.607,101.326 148.573,105.426 148.573,109.293C157.373,113.026 166.107,117.559 174.773,122.893L163.573,150.293C157.707,146.426 152.04,143.093 146.573,140.293C145.373,151.226 144.398,202.099 144.398,202.099L114.284,202.449C114.284,202.449 115.307,137.759 115.973,127.893C106.907,125.359 97.373,123.759 87.373,123.093C83.773,148.959 78.04,168.059 70.173,180.393C62.307,192.726 51.973,198.893 39.173,198.893ZM54.773,123.893C43.44,125.226 34.74,127.759 28.673,131.493C22.607,135.226 19.573,140.026 19.573,145.893C19.573,148.959 20.34,152.093 21.873,155.293C23.407,158.493 25.373,161.159 27.773,163.293C30.173,165.426 32.573,166.493 34.973,166.493C44.44,166.493 51.04,152.293 54.773,123.893Z"/>
    </g>
</svg>


                <p className="text-sm mr-2 ml-0.5">さいどみすきー</p>
            </a>
        </div>

        </div>
        {/* シェアテキストを編集 */}
        {/* Textarea by https://tailwindcomponents.com/component/share-modal */}
          {/* <link rel="stylesheet" href="https://unpkg.com/flowbite@1.4.4/dist/flowbite.min.css" /> */}
            <div className="max-w-2xl mx-auto">

                <label className="block text-sm font-sans text-gray-900 dark:text-gray-400">
                    シェアテキストを編集
                </label>

                <textarea 
                    id="message" 
                    rows={4} 
                    className="block p-2.5 w-full text-xs lg:text-sm text-blue-900 
                    bg-gray-50 rounded-lg border border-blue-300 
                    focus:ring-blue-500 focus:border-blue-500 " 
                    value={val}
                    onChange={(e) => {
                        setVal(e.target.value);
                      }}
                    placeholder="シェアテキスト"
                    >
                </textarea>

                {/* <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js" strategy="lazyOnload"></script> */}
            </div>
            <div className='flex mt-1 gap-2 justify-end'>
            <motion.button 
                className='rounded-lg border-2 border-pink-500 
                    text-pink-500 text-sm font-bold leading-tight
                    hover:bg-pink-200/50
                    transition-all duration-500 ease-out
                    p-2'
               onClick={() => setVal(shareText)}
               whileHover={{ scale: 1 }}
               whileTap={{ scale: 0.8 }}
               transition={{ duration: 0.05 }}
            >リセット</motion.button>
            <motion.button className='rounded-lg border-2 border-green-500 
                text-green-500 text-sm font-bold leading-tight
                hover:bg-green-200/50
                transition-all duration-500 ease-out
                p-2'
               onClick={() => copyTextToClipboard(val)}
               whileTap={{ scale: 0.8 }}
               transition={{ duration: 0.05 }}
            >コピー</motion.button>
            </div>


        </div>
        </section>
    )
}